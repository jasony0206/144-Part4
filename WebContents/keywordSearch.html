<!DOCTYPE html>
<html>
<head>
<title>Keyword Search</title>
</head>

<body>
<form action="search">
  Query: <input type="text" name="q" onKeyUp="sendQueryToServlet(this.value);">
  <input type="hidden" name="numResultsToSkip" value="0">
  <input type="hidden" name="numResultsToReturn" value="30">
</form>
<div id="suggestion"></div>
</body>

<script>
	var xmlHttp = new XMLHttpRequest();
	function sendQueryToServlet(query) {
		var request = "suggest?q=" + encodeURI(query);

		xmlHttp.open("GET", request);
		xmlHttp.onreadystatechange = showSuggestion;
		xmlHttp.send(null);
	}

	function showSuggestion() {
		if (xmlHttp.readyState == 4) {
			var xmlDoc = xmlHttp.responseXML;
			if (xmlDoc != undefined) {
				var suggestions = xmlDoc.getElementsByTagName("suggestion");
				var limit = Math.min(suggestions.length, 5);
				document.getElementById("suggestion").innerHTML = "";
				for (i = 0; i < limit; i++) {
					document.getElementById("suggestion").innerHTML += suggestions[i].attributes[0].nodeValue + "<br>";
				}
			} else {
				document.getElementById("suggestion").innerHTML = "";
			}
		}
	}
</script>
</html>